<%#
  PDF Viewer partial example for Rails

  Required local variables:
    - document: An object with `file` (ActiveStorage attachment) and `name` attributes
    - annotations_url: Path to the annotations REST endpoint

  Optional local variables:
    - user_name: Current user's name (for watermarks)
    - organization_name: Organization name (for watermarks)
    - initial_page: Page number to open on load
    - initial_annotation: Annotation ID to highlight on load
    - tracking_url: Endpoint for time tracking (optional)
%>

<div class="pdf-viewer-container"
     data-controller="pdf-viewer"
     data-pdf-viewer-target="container"
     data-pdf-viewer-document-url-value="<%= url_for(document.file) %>"
     data-pdf-viewer-document-name-value="<%= document.name %>"
     data-pdf-viewer-annotations-url-value="<%= annotations_url %>"
     <% if local_assigns[:user_name] %>
       data-pdf-viewer-user-name-value="<%= user_name %>"
     <% end %>
     <% if local_assigns[:organization_name] %>
       data-pdf-viewer-organization-name-value="<%= organization_name %>"
     <% end %>
     <% if local_assigns[:initial_page] %>
       data-pdf-viewer-initial-page-value="<%= initial_page %>"
     <% end %>
     <% if local_assigns[:initial_annotation] %>
       data-pdf-viewer-initial-annotation-value="<%= initial_annotation %>"
     <% end %>
     <% if local_assigns[:tracking_url] %>
       data-pdf-viewer-tracking-url-value="<%= tracking_url %>"
     <% end %>>

  <%# Toolbar - render the toolbar partial %>
  <div class="pdf-viewer-toolbar">
    <%= render "path/to/toolbar" %>
  </div>

  <%# Main viewer body %>
  <div class="pdf-viewer-body">
    <%# Loading overlay - shown while PDF loads %>
    <div class="pdf-loading-overlay" data-pdf-viewer-target="loadingOverlay">
      <div class="pdf-loading-spinner"></div>
      <div class="pdf-loading-text">Loading document...</div>
    </div>

    <%# PDF pages container - pages are rendered here by JavaScript %>
    <div class="pdf-pages-container"></div>
  </div>
</div>
